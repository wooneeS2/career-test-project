{"ast":null,"code":"var _jsxFileName = \"/Users/kimwonhee/Desktop/GitHub/career-test-project/src/pages/TestFinishPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport { NextBtnWithoutLink } from \"../style_components/CustomButtons\";\nimport { Typography, Box } from \"@mui/material\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function TestFinishPage() {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      sx: {\n        marginBottom: \"20px\",\n        marginLeft: \"100px\"\n      },\n      children: \"\\uAC80\\uC0AC\\uAC00 \\uC644\\uB8CC\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LoadLocation, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_c = TestFinishPage;\n\nfunction LoadLocation() {\n  _s();\n\n  const [postAnswrs, setPostAnswrs] = useState([]);\n  const [requestUrl, setRequestUrl] = useState(\"\");\n  const [seq, setSeq] = useState(\"\");\n  const [resultData, setResultData] = useState([]);\n  const [st, setSt] = useState(0);\n  const [nd, setNd] = useState(0);\n  const [allScore, setAllScore] = useState([]);\n  const [educationJobs, setEducationJobs] = useState([]);\n  const [majorJobs, setMajorJobs] = useState([]);\n  const apiKey = process.env.REACT_APP_API_KEY;\n  const url = `http://www.career.go.kr/inspct/openapi/test/report?apikey=${apiKey}&qestrnSeq=6`;\n  const qestrnSeq = \"6\";\n  let location = useLocation();\n  useEffect(() => {\n    console.log(\"location\", location);\n  }, []);\n  useEffect(() => {\n    const result = location.state.newAnswr.map((answer, index) => {\n      return `B${index + 1}=${answer.value}`;\n    }).join(\" \");\n    setPostAnswrs(result);\n  }, [location]);\n  useEffect(() => {\n    async function requsetPost() {\n      let targetSe = sessionStorage.getItem(\"userTarget\");\n      let userName = sessionStorage.getItem(\"userName\");\n      let userGrade = sessionStorage.getItem(\"userGrade\");\n      let userGender = sessionStorage.getItem(\"userGender\");\n      let school = sessionStorage.getItem(\"userBelong\");\n      const result = await axios.post(url, {\n        apikey: apiKey,\n        qestrnSeq: qestrnSeq,\n        trgetSe: targetSe,\n        name: userName,\n        gender: userGender,\n        school: school,\n        grade: userGrade,\n        email: \"\",\n        startDtm: 1550466291034,\n        answers: postAnswrs // answers:\n        //   \"B1=30 B2=30 B3=30 B4=7 B5=10 B6=12 B7=14 B8=15 B9=17 B10=20 B11=21 B12=23 B13=26 B14=28 B15=30 B16=31 B17=30 B18=30 B19=30 B20=30 B21=30 B22=44 B23=45 B24=48 B25=49 B26=51 B27=53 B28=56\",\n\n      });\n      setRequestUrl(result.data.RESULT.url);\n      console.log(\"결과\", requestUrl);\n    }\n\n    requsetPost();\n  }, [postAnswrs]);\n  useEffect(() => {\n    let tempSeq = requestUrl.split(\"seq=\")[1];\n    console.log(tempSeq);\n    setSeq(tempSeq);\n  }, [requestUrl]);\n  const [tempStr, setTempStr] = useState(\"\");\n  useEffect(() => {\n    async function requestGet() {\n      let infoUrl = `https://www.career.go.kr/inspct/api/psycho/report?seq=${seq}`;\n      console.log(\"seq\", seq);\n      const result = await axios.get(infoUrl);\n      setResultData(result.data);\n      setTempStr(result.data.result.wonScore);\n    }\n\n    requestGet();\n  }, [seq]);\n  useEffect(() => {\n    async function requestGet() {\n      const split = tempStr.split(\" \");\n      const arr = split.map(a => {\n        const temp = a.split(\"=\");\n        const result = [];\n        result.push(parseInt(temp[1]));\n        return result;\n      });\n      var score = arr.flat();\n      score.pop();\n      setAllScore(score);\n      let scores = [...score, 0];\n      console.log(\"최종 점수:\", score);\n      let max = scores.reduce((prev, cur) => {\n        return prev > cur ? prev : cur;\n      }, 0);\n      setSt(scores.indexOf(max));\n      console.log(\"최고점\", max, \"인덱스\", scores.indexOf(max));\n      let found = scores.findIndex(e => e === max);\n      console.log(\"맥스의 인덱스\", found);\n      let seScore = score.slice();\n      delete seScore[found];\n      console.log(\"일등이 제거된 배열\", seScore);\n      let second = seScore.reduce((prev, cur) => {\n        return prev > cur ? prev : cur;\n      }, 0);\n      setNd(seScore.indexOf(second));\n      console.log(\"2등\", second, \"인덱스\", seScore.indexOf(second));\n      console.log(score);\n    }\n\n    requestGet();\n  }, [tempStr]);\n  useEffect(() => {\n    //학력별 직업\n    async function requestEducation() {\n      let jobUrl = `https://inspct.career.go.kr/inspct/api/psycho/value/jobs?no1=${st + 1}&no2=${nd + 1}`;\n      const response = await axios.get(jobUrl);\n      console.log(\"joburl\", jobUrl);\n      setEducationJobs([response.data]);\n      console.log(\"education\", response.data);\n    }\n\n    async function requestMajor() {\n      let majorUrl = `https://inspct.career.go.kr/inspct/api/psycho/value/majors?no1=${st + 1}&no2=${nd + 1}`;\n      const response = await axios.get(majorUrl);\n      console.log(\"majorUrl\", majorUrl);\n      setMajorJobs([response.data]);\n      console.log(\"major\", response.data);\n    }\n\n    requestEducation();\n    requestMajor();\n  }, [st, nd]);\n  let history = useHistory();\n\n  const onClick = () => {\n    history.push({\n      pathname: \"/test-result\",\n      state: {\n        resultUrl: requestUrl,\n        score: allScore,\n        education: educationJobs,\n        major: majorJobs\n      }\n    });\n  };\n\n  let values = [\"능력발휘\", \"자율성\", \"보수\", \"안정성\", \"사회적인정\", \"사회봉사\", \"자기계발\", \"창의성\"];\n  let one = values[st];\n  let two = values[nd];\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        margintTop: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        display: \"inline\",\n        sx: {\n          fontWeight: \"bold\",\n          backgroundColor: \"#D7E7D4\"\n        },\n        children: sessionStorage.getItem(\"userName\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        display: \"inline\",\n        children: [\"\\uB2D8\\uC774 \\uC9C1\\uC5C5\\uC744 \\uC120\\uD0DD\\uD560 \\uB54C \\uC788\\uC5B4\\uC11C \\uC911\\uC694\\uD558\\uAC8C \\uC0DD\\uAC01\\uD558\\uB294 \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 38\n        }, this), \"\\uAC00\\uCE58\\uB294\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        display: \"inline\",\n        sx: {\n          fontWeight: \"bold\",\n          backgroundColor: \"#D7E7D4\"\n        },\n        children: one\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), \",\", \" \", /*#__PURE__*/_jsxDEV(Typography, {\n        display: \"inline\",\n        sx: {\n          fontWeight: \"bold\",\n          backgroundColor: \"#D7E7D4\"\n        },\n        children: two\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), \"\\uC785\\uB2C8\\uB2E4.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        marginTop: \"25px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(NextBtnWithoutLink, {\n        title: \"검사 결과 보러가기\",\n        onClick: onClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(LoadLocation, \"cllNLezunmjuaxWYbKvgnJ90BeI=\", false, function () {\n  return [useLocation, useHistory];\n});\n\n_c2 = LoadLocation;\nexport default TestFinishPage();\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TestFinishPage\");\n$RefreshReg$(_c2, \"LoadLocation\");","map":{"version":3,"sources":["/Users/kimwonhee/Desktop/GitHub/career-test-project/src/pages/TestFinishPage.js"],"names":["React","useEffect","useState","useLocation","useHistory","NextBtnWithoutLink","Typography","Box","axios","TestFinishPage","marginBottom","marginLeft","LoadLocation","postAnswrs","setPostAnswrs","requestUrl","setRequestUrl","seq","setSeq","resultData","setResultData","st","setSt","nd","setNd","allScore","setAllScore","educationJobs","setEducationJobs","majorJobs","setMajorJobs","apiKey","process","env","REACT_APP_API_KEY","url","qestrnSeq","location","console","log","result","state","newAnswr","map","answer","index","value","join","requsetPost","targetSe","sessionStorage","getItem","userName","userGrade","userGender","school","post","apikey","trgetSe","name","gender","grade","email","startDtm","answers","data","RESULT","tempSeq","split","tempStr","setTempStr","requestGet","infoUrl","get","wonScore","arr","a","temp","push","parseInt","score","flat","pop","scores","max","reduce","prev","cur","indexOf","found","findIndex","e","seScore","slice","second","requestEducation","jobUrl","response","requestMajor","majorUrl","history","onClick","pathname","resultUrl","education","major","values","one","two","margintTop","fontWeight","backgroundColor","marginTop"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useLocation, useHistory } from \"react-router-dom\";\nimport { NextBtnWithoutLink } from \"../style_components/CustomButtons\";\nimport { Typography, Box } from \"@mui/material\";\nimport axios from \"axios\";\n\nexport function TestFinishPage() {\n  return (\n    <>\n      <Typography\n        variant=\"h4\"\n        sx={{ marginBottom: \"20px\", marginLeft: \"100px\" }}\n      >\n        검사가 완료되었습니다.\n      </Typography>\n\n      <LoadLocation />\n    </>\n  );\n}\n\nfunction LoadLocation() {\n  const [postAnswrs, setPostAnswrs] = useState([]);\n  const [requestUrl, setRequestUrl] = useState(\"\");\n  const [seq, setSeq] = useState(\"\");\n  const [resultData, setResultData] = useState([]);\n  const [st, setSt] = useState(0);\n  const [nd, setNd] = useState(0);\n  const [allScore, setAllScore] = useState([]);\n  const [educationJobs, setEducationJobs] = useState([]);\n  const [majorJobs, setMajorJobs] = useState([]);\n  const apiKey = process.env.REACT_APP_API_KEY;\n  const url = `http://www.career.go.kr/inspct/openapi/test/report?apikey=${apiKey}&qestrnSeq=6`;\n\n  const qestrnSeq = \"6\";\n\n  let location = useLocation();\n\n  useEffect(() => {\n    console.log(\"location\", location);\n  }, []);\n\n  useEffect(() => {\n    const result = location.state.newAnswr\n      .map((answer, index) => {\n        return `B${index + 1}=${answer.value}`;\n      })\n      .join(\" \");\n    setPostAnswrs(result);\n  }, [location]);\n\n  useEffect(() => {\n    async function requsetPost() {\n      let targetSe = sessionStorage.getItem(\"userTarget\");\n      let userName = sessionStorage.getItem(\"userName\");\n      let userGrade = sessionStorage.getItem(\"userGrade\");\n      let userGender = sessionStorage.getItem(\"userGender\");\n      let school = sessionStorage.getItem(\"userBelong\");\n\n      const result = await axios.post(url, {\n        apikey: apiKey,\n        qestrnSeq: qestrnSeq,\n        trgetSe: targetSe,\n        name: userName,\n        gender: userGender,\n        school: school,\n        grade: userGrade,\n        email: \"\",\n        startDtm: 1550466291034,\n        answers: postAnswrs,\n        // answers:\n        //   \"B1=30 B2=30 B3=30 B4=7 B5=10 B6=12 B7=14 B8=15 B9=17 B10=20 B11=21 B12=23 B13=26 B14=28 B15=30 B16=31 B17=30 B18=30 B19=30 B20=30 B21=30 B22=44 B23=45 B24=48 B25=49 B26=51 B27=53 B28=56\",\n      });\n\n      setRequestUrl(result.data.RESULT.url);\n      console.log(\"결과\", requestUrl);\n    }\n    requsetPost();\n  }, [postAnswrs]);\n\n  useEffect(() => {\n    let tempSeq = requestUrl.split(\"seq=\")[1];\n    console.log(tempSeq);\n\n    setSeq(tempSeq);\n  }, [requestUrl]);\n\n  const [tempStr, setTempStr] = useState(\"\");\n  useEffect(() => {\n    async function requestGet() {\n      let infoUrl = `https://www.career.go.kr/inspct/api/psycho/report?seq=${seq}`;\n\n      console.log(\"seq\", seq);\n      const result = await axios.get(infoUrl);\n\n      setResultData(result.data);\n\n      setTempStr(result.data.result.wonScore);\n    }\n    requestGet();\n  }, [seq]);\n\n  useEffect(() => {\n    async function requestGet() {\n      const split = tempStr.split(\" \");\n\n      const arr = split.map(a => {\n        const temp = a.split(\"=\");\n\n        const result = [];\n\n        result.push(parseInt(temp[1]));\n\n        return result;\n      });\n\n      var score = arr.flat();\n      score.pop();\n      setAllScore(score);\n      let scores = [...score, 0];\n      console.log(\"최종 점수:\", score);\n      let max = scores.reduce((prev, cur) => {\n        return prev > cur ? prev : cur;\n      }, 0);\n\n      setSt(scores.indexOf(max));\n      console.log(\"최고점\", max, \"인덱스\", scores.indexOf(max));\n      let found = scores.findIndex(e => e === max);\n      console.log(\"맥스의 인덱스\", found);\n\n      let seScore = score.slice();\n      delete seScore[found];\n      console.log(\"일등이 제거된 배열\", seScore);\n      let second = seScore.reduce((prev, cur) => {\n        return prev > cur ? prev : cur;\n      }, 0);\n\n      setNd(seScore.indexOf(second));\n      console.log(\"2등\", second, \"인덱스\", seScore.indexOf(second));\n      console.log(score);\n    }\n    requestGet();\n  }, [tempStr]);\n\n  useEffect(() => {\n    //학력별 직업\n    async function requestEducation() {\n      let jobUrl = `https://inspct.career.go.kr/inspct/api/psycho/value/jobs?no1=${\n        st + 1\n      }&no2=${nd + 1}`;\n      const response = await axios.get(jobUrl);\n      console.log(\"joburl\", jobUrl);\n      setEducationJobs([response.data]);\n      console.log(\"education\", response.data);\n    }\n\n    async function requestMajor() {\n      let majorUrl = `https://inspct.career.go.kr/inspct/api/psycho/value/majors?no1=${\n        st + 1\n      }&no2=${nd + 1}`;\n      const response = await axios.get(majorUrl);\n      console.log(\"majorUrl\", majorUrl);\n      setMajorJobs([response.data]);\n      console.log(\"major\", response.data);\n    }\n\n    requestEducation();\n    requestMajor();\n  }, [st, nd]);\n\n  let history = useHistory();\n\n  const onClick = () => {\n    history.push({\n      pathname: \"/test-result\",\n      state: {\n        resultUrl: requestUrl,\n        score: allScore,\n        education: educationJobs,\n        major: majorJobs,\n      },\n    });\n  };\n  let values = [\n    \"능력발휘\",\n    \"자율성\",\n    \"보수\",\n    \"안정성\",\n    \"사회적인정\",\n    \"사회봉사\",\n    \"자기계발\",\n    \"창의성\",\n  ];\n  let one = values[st];\n  let two = values[nd];\n\n  return (\n    <>\n      <Box sx={{ margintTop: \"20px\" }}>\n        <Typography\n          display={\"inline\"}\n          sx={{ fontWeight: \"bold\", backgroundColor: \"#D7E7D4\" }}\n        >\n          {sessionStorage.getItem(\"userName\")}\n        </Typography>\n        <Typography display={\"inline\"}>\n          님이 직업을 선택할 때 있어서 중요하게 생각하는 <br />\n          가치는{\" \"}\n        </Typography>\n        <Typography\n          display={\"inline\"}\n          sx={{ fontWeight: \"bold\", backgroundColor: \"#D7E7D4\" }}\n        >\n          {one}\n        </Typography>\n        ,{\" \"}\n        <Typography\n          display={\"inline\"}\n          sx={{ fontWeight: \"bold\", backgroundColor: \"#D7E7D4\" }}\n        >\n          {two}\n        </Typography>\n        입니다.\n      </Box>\n      <Box sx={{ marginTop: \"25px\" }}>\n        <NextBtnWithoutLink title={\"검사 결과 보러가기\"} onClick={onClick} />\n      </Box>\n    </>\n  );\n}\n\nexport default TestFinishPage();\n"]},"metadata":{},"sourceType":"module"}